I have an ABB PM556 PLC and I'm trying to send an email from it using the function block ETH_SMTP_EMAIL_SEND. I'm having issues declaring the inputs for MAIL_INFO on the FB. The function bock uses data type ETH_EMAIL_DATA_TYPE, so I created a variable and declared it as that type.EmailData : ETH_EMAIL_DATA_TYPE;Then in the program, I try to write to the subject and body for my EmailData variable.EmailData.psTOAddr := 'myemailaddress@mycompany.com';EmailData.apsBody[0] := 'test body for email from PLC';However, I keep getting the following errors:Error 4339: EMailProgramTest(1): Type mismatch at output: Cannot convert 'STRING(80)' to 'POINTER TO STRING(255)'.Here are the only two links I've been able to find describing this function block and data type.http://www.vaeprosys.cz/dokumentace/ac500/English/CHM-Files/CAA-Merger-6/The-Ethernet-Library/ETH_SMTP_EMAIL_SEND.htmhttp://www.vaeprosys.cz/dokumentace/ac500/English/CHM-Files/CAA-Merger-6/The-Ethernet-Library/ETH_EMAIL_DATA_TYPE.htmHow can I define values for my EmailData variable? The ETH_EMAIL_DATA_TYPE being defined as pointer to strings is throwing me off.

Was reading on this website http://www.vaeprosys.cz/dokumentace/ac500/English/CHM-Files/CAA-Merger-7/System-Technology-CPUs/AC500_Ethernet_Protocols_Ports.htm and it doesn't look my CPU supports the function block.If the errors were caused by something else, besides the CPU not supporting it, I'd appreciate any replies so I could add this to my toolbox.Thanks!

the type of the string is wrong, you try a string (80) and should be a pointer to string,there are types available in the library, and you have to be sure the types on input and inside FB are the same.on some it is the version that gives a problem, so check if the version of the codesys can cope and with the PLC and with the libraries.

_________________shooter@home.nlcomputer shooterpaul deelenjacob van wassenaerstraat 29NL 5224 GG 's-Hertogenboschskype shooter paul.deelenphone +31736139136

How do I declare a variable as 'POINTER TO STRING(255)'? I tried that too and still got an error. For example, I declared the variable.ToEmailAddress : POINTER TO STRING(255) := 'myemail@mycompany.com';I know my PLC doesn't support the function block, but that is a socket issue. The errors I'm getting are about mismatched variables and data types. I understand the subject email address has to be 'POINTER TO STRING(255)' but don't know how to declare a variable as that.

a Pointer must be pointing to a Variable, so not the content but a Var, and obvious this must be same type so both 80 or 255.not to a piece of text.btw, i never use pointers, as this is not conform the standard. IEC61131

_________________shooter@home.nlcomputer shooterpaul deelenjacob van wassenaerstraat 29NL 5224 GG 's-Hertogenboschskype shooter paul.deelenphone +31736139136

jethridge wrote:How do I declare a variable as 'POINTER TO STRING(255)'? I tried that too and still got an error. For example, I declared the variable.ToEmailAddress : POINTER TO STRING(255) := 'myemail@mycompany.com';I know my PLC doesn't support the function block, but that is a socket issue. The errors I'm getting are about mismatched variables and data types. I understand the subject email address has to be 'POINTER TO STRING(255)' but don't know how to declare a variable as that.Did you notice the example within the online help?Example:pt:POINTER TO INT;var_int1:INT := 5;var_int2:INT;pt := ADR(var_int1);var_int2:= pt^; (* var_int2 is now 5 *)

