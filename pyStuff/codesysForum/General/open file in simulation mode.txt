Hi Developers,

For testing purposes I need to open a file while my application is running in simulation mode using SysOpenFile.

The file is in the same folder of the project *.pro but SysOpenFile always returns 0.

Is it possible to open a file or I need to be connect on a real target?

Best regards

Daeio

Hi
Sorry, but the SysFileLib functions do not work in Simulation mode.

Best regards
Erik

_________________Wer Rechtschreibfehler findet darf sie behalten...

Hi,i would wanna know if you can show me some e.g. for syslibfile.. i understand that not work on online mode... wherever, i wanna be sure about how to use it because i need create a file for store a value from a variable. and a need writte the value into a .txt... thanks.. can you help me? i'm sorry for my english.

If i understood you correctly, the examples below can help you. But this example is on Russia, but you can use Google-translate, or look at code. It's pretty understandable. There are too much explanations, but you need part below line "*******" after fig 3.http://forum-ru.3s-software.com/viewtop ... 1584#p1584

HiDid you read the CoDeSys documentation to SysLibFile ?Everything you need is described there.Erik

_________________Wer Rechtschreibfehler findet darf sie behalten...

excuse me but, if i use OPC server it's not easier? the example in russ is so good!. but, does not work...

What do you want ?Write into a .txt, or use OPC ?Thats 2 different things...Writing in a file is very easy.Erik

_________________Wer Rechtschreibfehler findet darf sie behalten...

I really want to get the value from a global variable of codesys, then to safe that values into a .txt file; but i don't know if using OPC would be easier for that, that was my question about OPC. but, please if you can help me to make that, i will be thankful.

Try this:FUNCTION_BLOCK WriteValueToFile_FBVAR_INPUT	strFileName:			STRING(255);	strDataBuffer:			STRING(255);END_VARVAR_OUTPUT	bDone:		BOOL;	bError:		BOOL;	wErrorID:	WORD;END_VARVAR	dwBytesWritten:	DWORD;	dwFileWrite:		DWORD	:= 0;END_VAR-------------------------------------------------------------------------------------------dwFileWrite := SysFileOpen(FileName:=strFileName, Mode:='a');IF dwFileWrite = 0 THEN	(*error: file couldn't be opened *)	bError	:= TRUE;	wErrorID	:= 1;	RETURN;END_IFdwBytesWritten	:= SysFileWrite(File:=dwFileWrite, Buffer:=ADR(strDataBuffer), Size:=LEN(strDataBuffer));IF dwBytesWritten = LEN(strDataBuffer) THEN	bDone	:= TRUE;	SysFileClose(dwFileWrite);	dwFileWrite	:= 0;ELSE	bDone	:= FALSE;	SysFileClose(dwFileWrite);	dwFileWrite	:= 0;END_IF

_________________Wer Rechtschreibfehler findet darf sie behalten...

Thanks for your code. I wonder if the error is due to the way I'm stating the name of the file, because I am stating this: strFileName: STRING (255): = 'c: / data / mylog.txt', the results from strDataBuffer is 0 I think it can be because I'm in simulation mode and I understand that you can have conflicts, have you any idea how to see the results? The PLC I'm using is a MFD4-5-XRC-30. If only work connected with the PC or does will lack the MMC?Code:strFileName: STRING (255): = 'c: / data / mylog.txt';the results are:

HiAs usual, SysLibs do not work in Simulation mode.There is no Hardware selected, so there are no SysLibs...Erik

_________________Wer Rechtschreibfehler findet darf sie behalten...

ventas3 wrote:excuse me but, if i use OPC server it's not easier? the example in russ is so good!. but, does not work...All examples were checked out many times by a lot of peoples. Just believe me, i know it:) Theres a lot of peculiarities which isn't showed on figures but explained in text, and you probably miss them. But you can ask me about problem with it.I'll reply.i attached very simple project (special for you from Russia with love  ). This one is written for PLCWinNT. Start the program and change "Start" variable to TRUE.It write the string WriteBuffer into file on drive "D" (you should fix it if you don't have drive D) and read it to string ReadBuffer.It works well 

[quote= It works well [/quote]Muchisimas Gracias a todos!... Thank you very much for your help...! I discovered that the problem I had was when the file name. Should be done according to the specified path when you enter the command files..! ie OpenFile1: = SysFileOpen ('\ disk_sys \ project \ File1', 'r ');

ventas3 wrote:Mikhail Shvetsov wrote:  It works well Muchisimas Gracias a todos!... Thank you very much for your help...!..Да всегда пожалуйста  - it means - You are always welcome!

Mikhail Shvetsov wrote:If i understood you correctly....Hello my friend. I've a question, i hope you can help me please, in advance apologize the inconvenience...i try to connecting my PLC easyHMI MFD4 to a sensor with a Ethernet interface but, i'm using syslibsocket library, not possible.. can you help me to do? first i connect my plc with a java application make for me, the program java it's fine. i can do connect, but i can not write or read data from PLC. if i can to do that, i can do it between PLC and Sensor... Thank you!.Servidor means SERVER, CONECTAR: connect, esperando conexion: waiting for connection, conexion 1 recibida de: connection 1 recieve from

