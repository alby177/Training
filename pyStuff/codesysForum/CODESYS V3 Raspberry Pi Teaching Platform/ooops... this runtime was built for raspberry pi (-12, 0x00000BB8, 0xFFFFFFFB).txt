Hi all,I'm glad we have now a possibility to use our devices with Codesys - widely known and accepted platform even in our Raspberries.I'm trying to get a bit more from it and help trainees to understand what is latency and how it "works". For this I'm compiling my kernels for Rasp. by myself.Today I found a strange behavior - I'm playing with pretty new kernels (4. and codesys runtime always suddenly stops without any real error - and I found this ooops in log (please see the attachments).I believe my kernels are OK, basically this are the standard ones only with preempt and/or RT patches... but codesys realtime is somehow checking something and it found out it is not running on Raspberry (of course is wrong, it is running on raspberry).Here are some additional details Code:cat uname Linux raspberrypi 4.8.10-v7+ #2 SMP PREEMPT Sun Nov 27 20:30:55 CET 2016 armv7l GNU/LinuxCodesys runtime is 3.5.9.40Cpuinfo is in the attachment.Can I do something to get rid of this ooops?Thanks,RegardsJan.

Hi,not really sure what is mssing.you need to compare the kernel modules which are running.I would recommend to use emlid / naivio (search the forum) and use a precompiled rt_preemt kernel embedded in an ready to use Image.BREdwin

Hi Edwin,well, missing modules are not likely the case.If I build kernel 4.4.35 without hard RT and 4.8.10 also without hard RT then with 4.4.35 has runtime no problem at all and works fine. With 4.8.10 it detects something "wrong" and bails out with this message.Can you see from the code (-12, ....) what is wrong, the reason why to believe it is not running on raspberry?Please note - kernel 4.8 detect the raspberry CPU as BCM2835 (see the /proc/cpuinfo file pls.) and kernel 4.4 as BCM2709 (4.4. kernel is particularly wrong as 2709 is chip family name https://github.com/raspberrypi/linux/issues/22).Can you please double check it? I believe internal "protection" against non-raspberry use needs to be updated...BRJan.

Hi,we agree that this need to be fixed!This will be released with 3.5SP10 release on 15th december. (+x days for the Pi Release in the CODESYS Store)BREdwin

Hi Jan,this should work now with 3.5.10.0 release.Could you please check this?BREdwin

Hi Edwin,I can confirm, it works.Thanks,Jan.

