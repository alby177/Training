Hi.I'm new to ethercat softmotion (especially with raspberrypi), I'm trying to run a stepper motor with Beckhoff EK1100 + EL2521 without success.It seems there is a communication error or sync error, please refer to attached screenshots below.Attachment:2018-02-11_14-02-16.pngAttachment:2018-02-11_14-02-40.pngAttachment:2018-02-11_14-29-43.pngI've made some search on this issue and found following topic which says EL2521 driver works without any real time patch for Pi.However in my case it does not work.viewtopic.php?f=21&t=8560Any help would be appreciated.Best Regards.Y.M. Kim

Hi,did you check the if workaround works for you(from the link you have posted)?Because to have dc enabled is mandotary for Softmotion, but for EL2521 on Raspberry PI or Control Win,EL2521 would work without... so you need to increase the syncwindow a lot. BREdwin

Hi Mr. EdwinThank you a lot .I tried the solution in the post and unfortunately it does not work for me.Followings are my settings, is thare any other setting i need to change from the default? Please advise.<Ethercat Master>Attachment:Ethercat Master.png<EK1100>Attachment:EK1100.png<EL2521>Attachment:EL2521.png<Axis>Attachment:SM_Drive_EL2521.pngBest Regards.Y.M. Kim

Hi,sync offset back to 20(default) in the masterCould you please give a screenshot from taskmonitor for the jitter usage of the Motion/ethercat Task?BREdwin

Dear Edwinthe sync offset is now 20 again, thanks.following is the monitoring screen from the project. EtherCAT_Mater.EtherCAT_Task is located under MainTask.Attachment:2018-02-11_16-22-13.pngMODIFIED:the EtherCAT_Master.EtherCAT_Task has been seperated from MainTask to another task with interval of 4000 mico second, here is the monitoring screen.Attachment:2018-02-11_17-02-50.pngBest Regards.Y.M. Kim

Hi,could you reset the line by rightclick...BREdwin

Thanks for your response, Edwin.Attachment:2018-02-13_14-31-00.pngNow it seems the communication issue has been solved after patching Preempt_RT to RaspberryPi as screenshot below.However another issue i'm facing is... MC_... function blocks are not working (MC_POWER, MC_JOG...)MC_POWER.status is still FALSE and busy is TRUE after MC_POWER is enabled.I would appreciate your help.Attachment:2018-02-13_13-12-53.pngBest Regards.Y.M.Kim

Hi Kim,if you call the motion fb's in the ethercat Task it will work.BREdwin

Thank you for your fast response.Unfortunately, it seems the proposed solution does not work for me.Still, "status" is FALSE and "busy" is TRUE in MC_POWER.Attachment:2018-02-13_15-56-00.pngI was just wondering if this issue has to do with axis type, is it correct to use a name of "AXIS_REF_ETC_EL2521" as an input axis of MC_POWER?Codesys is saying it has to be "AXIS_REF_SM3" axis.Attachment:2018-02-13_16-06-15.pngBest Regards.Y.M. Kim

Hi. EdwinI was stupid to put MC_POWER in CASE statement, which resulted in calling the FB only for a one cycle.After putting MC_POWER FB outside the CASE statement, everything is OK.Thanks for your help.

