Hello everyone,I have Raspberry PI 2 and 4 Relay board (http://www.seeedstudio.com/wiki/Raspber ... Board_v1.0). I have a lot of expirience with codesys in building automation, but I can not solve this.How do I connect RPI2 and this relay board in Codesys?Has anyone have a sample program (ON OFF relay) so that I can start from there, please? I can not find any library for this and I2C is something new for me.Best regards

Hi,serveral Options:you need to add ad Driver (library and device description) as shown in the pdf"c:\Users\<YourWindowsUserName>\CODESYS Control for Raspberry PI\2.2.0.2\DataSheet\RaspberryPI_en.pdf" from your link there is the source code snippet, which shows which addresses are used by the deviceimport timeCode:import smbusimport signalimport sysbus = smbus.SMBus(1)    # 0 = /dev/i2c-0 (port I2C0), 1 = /dev/i2c-1 (port I2C1)class Relay():       global bus    def __init__(self):   self.DEVICE_ADDRESS = 0x20      #7 bit address (will be left shifted to add the read write bit)   self.DEVICE_REG_MODE1 = 0x06   self.DEVICE_REG_DATA = 0xff   bus.write_byte_data(self.DEVICE_ADDRESS, self.DEVICE_REG_MODE1, self.DEVICE_REG_DATA)If you have this device working feel free to publish your approach here:viewforum.php?f=23Thank a lot.BREdwin

Hi,thank you for your reply. I have tryed but I am not very good at this, so I am asking for a sample.Regards

Hi,you'll find the samles here: (here are the open libs to check how it works withlibraries:"c:\Users\YourWindowsUserName\CODESYS Control for Raspberry PI\2.2.0.2\Libraries\" devices:"c:\Users\YourWindowsUserName\CODESYS Control for Raspberry PI\2.2.0.2\Devices\" another option is to use"c:\Users\YourWindowsUserName\CODESYS Control for Raspberry PI\2.2.0.2\Examples\PiFace_FB.project" and realize this with I2C Bus... (without Setup a library and devdec)BREdwin

Hi,I have no idea how to start end where to start. I will be very grateful if anyone can publish a test sw for this, at lest for one digital output. Best regards

Hi,I have made I2C master in Codesys and created a simple code for testing one relay output.This is my code and it is not working. My dip switch for on relay board is in state: all 4 switches are on.IF NOT xInit THEN	DEVICE_ADDRESS:= 16#20;	DEVICE_REG_MODE1 := 16#06;	DEVICE_REG_DATA := 16#FF;	I2C_master.write(DEVICE_ADDRESS , DEVICE_REG_MODE1 , DEVICE_REG_DATA );	xInit := TRUE;END_IFIF DO0 AND NOT xInit_DO0 THEN	DEVICE_ADDRESS:= 16#20;	DEVICE_REG_MODE1 := 16#06;	DEVICE_REG_DATA := 16#FE;	I2C_master.write(DEVICE_ADDRESS , DEVICE_REG_MODE1 , DEVICE_REG_DATA );	xInit_DO0 := TRUE;END_IF Can anyone tell what I am doing wrong?regards

Hi,I have decided to use SainSmart relays. Those have a 5V logic. Will my RPI2 be able to control them with 3,3V logic? On GPIO pin as DO the RPI2 puts 3,3V toGND pin when it is HIGH. Can we control the rlays with GND logic, not 3,3V? Regards.

Hello,I have a problme with this. I have configured GPI17 in GPIO18 as digital output. By default the digital output are FALSE. This means that Sainsmart relay will be TRUE or. LED on relay is ON. When I reboot the RPI2 the GPIO will not give 3,3V and GPIO is TRUE. IF I switch GPIO to FALSE and back to TRUE, then I get 3,3V. Whay is this hapening?regards

