hello, allI am facing a problem in v3.5, there is a motor driver connect via EtherCAT slave, and one remote plc via Modbus TCP Slave.the EtherCAT is for driving the motor, and Modbus TCP is only I/O exchanging with CoDeSys v3.5.problem is:The motor was not running smoothly enough(rotating fastly or reversely suddenly), it seems motor was lost some pulses/step sometimes, if I delete the Modbus TCP slave, motor was runing perfectly, EtherCAT seems was affected by Modbus TCP, when I changed Modbus TCP polling cycle time, motor running better.can any one gives any tips? I really need some help from you guys now.  thanks a lot.

Hi,please check taskdeployment tap in the plc device,you need to split all I/O's according to their task.Ethercat IO  need to be updatet in the Ethercat Task context and modbus IO's need to be updated in the modbus task context.Set the IO update task in the plc setting to Ethercatand in the modbus master you need to specify the modbus task as update task for the modbus io'sThen it will work.cu

Edwin Schwellinger wrote:Hi,please check taskdeployment tap in the plc device,you need to split all I/O's according to their task.Ethercat IO  need to be updatet in the Ethercat Task context and modbus IO's need to be updated in the modbus task context.Set the IO update task in the plc setting to Ethercatand in the modbus master you need to specify the modbus task as update task for the modbus io'sThen it will work.cuhi, Edwinthanks your reply.I had check IO updating by corresponding task, pls refer to attached picture. I had test it, it was not working as expecting.do I need any extra setting?thanks a lot...

hi,please add the screenshot from the Task deploymentthere you should see if the IO's are used in the right Task.cu

Edwin Schwellinger wrote:hi,please add the screenshot from the Task deploymentthere you should see if the IO's are used in the right Task.cuhi, EdwinThanks your fast reply.maybe you are right, i didn't find any IO specify into Modbus in task_deployment, i am just define IO to the address(like:var1 AT %QX167.0:BOOL; all the IO signals work fine), not fill into the Modbus IO mapping list. funny that they are all belong to Main_task, is it problem?other thing is, EtherCAT IO is:ID0~ID39, QD0~QD39, but in deployment all is 0. how come?thanks a lot...

yes that's the problem, you need to change your application in that waythat you only reference the modbus io's in the modbus Task, and the ethercat io's in the ethercat Task.Thats the solution. The Task deployment tap give you the Feedback after compile / generate code it is updated. These red and blue cross show you in which task you are using the specified input/output.If you change that our problems should be solved.cu

Edwin Schwellinger wrote:yes that's the problem, you need to change your application in that waythat you only reference the modbus io's in the modbus Task, and the ethercat io's in the ethercat Task.Thats the solution. The Task deployment tap give you the Feedback after compile / generate code it is updated. These red and blue cross show you in which task you are using the specified input/output.If you change that our problems should be solved.cuhi, EdwinSeems the problem has been solved, thanks your useful tips. 

