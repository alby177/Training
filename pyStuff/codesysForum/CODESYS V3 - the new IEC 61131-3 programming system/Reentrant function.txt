Hi all.Do you know if it is possible to call a function from himself in st.If yes, how. If I do:Funtion factorial:lrealVar_input   Value:lrealEnd_varIf(value<2) then  Factorial:=1Else  Factorial:=value*factorial(value-1)End_ifReturns an error

Hi Josep!It looks like you can't do that with a function...   Recursion is not handled gracefully by Codesys.The closest option here is to use a function block as:Code:FUNCTION_BLOCK fb_RecursiuVAR_INPUT   i : INT := 0;END_VARVAR_OUTPUT   iResult : INT := 0;END_VARVAREND_VAR-----------------------------------------------IF (i < 1)THEN   i := 0;ELSE   i := i - 1;   THIS^();END_IFiResult := i;And call it like this:Code:fbRecursiu(i := iStart, iResult => iResult);That could be solved the day functions can be pointed by pointers... or when recursion worked as expected...Hope this helps...

_________________http://www.robotecnik.com - robots, CNC and PLC programming.

Thanks Joan.I had not thought on this possibility, use an Fb. I will have it in mind.At the moment I had solved my problem with an for loop. But sometimes recursion is the most elegant solution.

One word of caution - Recursion can spell trouble for stack size and other "behind the scenes" mechanisms.  If you are dealing with Machine controllers and time sensitive field uses where their number one job is to not crash the whole machine, recursive solutions can be "risky" (just like for/next loops).

_________________Scott CunninghamKEB America, Inc.www.kebblog.comwww.kebamerica.com

