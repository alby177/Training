Hi all, could you please advice me. I'm able to write values from php via FC16 into the modbus. I can se that the variables were set:Attachment:2016-02-10 13_35_57-myFirst3S.project - CODESYS - values.pngbut the value is gone in few seconds and set back to 0:Attachment:2016-02-10 13_35_27-myFirst3S.project - CODESYS- without.pngwhy is this happening? any idea?second question, I'm not able to set the TYPE of the variables in I/O setting?Thank you in advance.

_________________Paul

I have worked with Modbus TCP a pretty fair amount recently.  I there is no "Modbus TCP" setting that would explain this.  If you were trying to write to a read only area, you would get faults or unchanged values.  I would recommend doublechecking the programming at the slave and master level and make sure that you don't have code overwriting those registers, or resetting them.As to the "TYPE" question, WORD and BYTES are pretty much it.  Modbus seems to move the binary bit patterns from one place to another with regard to data type.  If you need to treat the data as something else, you will need to declare a variable in the global variable list.If you needed motor speed 1 to be a double word you would go to the global variable list and do something likeMB_Motor_1 AT %IW0: DWORD;that will take IW0 and IW1 and place the binary bit pattern into the tag MB_MOTOR_1 and treat it as a double word.

Thank you for the reply. It gave me hope for a few minutes  but unfortunately the situation is still the same.I have no code that would null the modbus variables.  Neither in codesys neither in php.I have very simple code and this code was working in 2.3 now in 3.5 not.Maybe the modbus variables are nulled at the begining of each cycle?

_________________Paul

one more point, when I debug the code, the values stay set   I have tried to make few cycles...

_________________Paul

Hi maybe you could have set the Error Handling - Set to Zero instead or Keep last value.

Hi,there is no such a setting when having only modbus slave. I found those settings only if you have modbus masterAttachment:2016-02-11 09_31_36-myFirst3S_debug.project - CODESYS.png

_________________Paul

The way you have it set up, it looks like your CoDeSys controller is the Modbus slave.  If you want your CoDeSys to write to another device, you have to install a Modbus master then install the slave(s) under that.

_________________nOrM
=====
nOrM = Norman Dziedzic Jr.

Hi,the plc should be a modbus slave and it is solved by increasing the timeout.BREdwin

Same issue, with no result here, but all of a sudden it began working with these settings

