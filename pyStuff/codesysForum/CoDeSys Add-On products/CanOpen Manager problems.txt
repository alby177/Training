Hello all.My costumer wanted me to test the CanOpen bus for stability.The tests for loose connections and the ability for the CanOpen Bus to recover from that failed..Problem 1.If i try to plug unplug a contact for a Device sometimes the Manager Hangs..CanOpen manager is green, Node is red, When i monitor the bus the node sometimes is in operational sometimes in pre operational and sending heartbeats. If i try to send NMT Operational no message goes to the bus. Only way to recover is to cut the power to the PLC and reboot.After much testing I found a way to make this problem go away.. I configured all my nodes and saved the configuration in the node. I chose the CanOpen manager not to initialize the nodes and instead wrote some code to check if any of my nodes is either stopped or preop and if they were I started them.As this worked i think there is a bug hidden in the CanOpen manager code so it can become stuck in some state.. Is there any possibility to reset the CanOpen manager from code?[b]Problem 2.[/b]If we remove the CanOpen GND the same behaivior as above still comes and i need to restart the PLC.. Kernel state is No error or guarding error. The nodes is sending heartbeats but the manager cannot send anything to the bus..I am using Codesys V3.5 SP10 Patch 1The PLC is a brand new IFM Mobile Controller CR0720.

Hi,Add CANOPEN_DEBUG as compiler define... then check the plc logger for more details BREdwin

The earlier problems has been resolved by a firmware update of the PLC.BUT....I have more CanOpen problems.. The CanOpen manager goes offline sometimes and restarts so if it werent for that I have a remote controller with emergency stop I maybe wouldnt notice this.Have tried to add CANOPEN_DEBUG to the compiler define.. Every time i have tried that the PLC has crashed.The bus is set at 500kb/s.Monitoring with Kvaser CanKing software shows me no error frames (Other than a large bunch when I turn the power on but then it stops.) and a bus load of ~12%

Hi,guess this is still a plc problem, which plc is it. (Manufacturer?)You need to check with the so called CAN mini Driver conformance test.BREdwin

guess this is still a plc problem, which plc is it. (Manufacturer?) Yup, IFM. (Se bottom of first post for exact model). But we are now testing with another brand.The only errors I have when watching with CANOPEN_DEBUG is due to erroneous EDS files.Objects that doesnt exist and such. But that I already knew and have jumps to next line in the SDO configuration. You need to check with the so called CAN mini Driver conformance test.For future reference what is this where can i find more info?

Hi,this is part of the runtime toolkit delivery which the plc manufacturer get on purchsing the runtime.BREdwin

